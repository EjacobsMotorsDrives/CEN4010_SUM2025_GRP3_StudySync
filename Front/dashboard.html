<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StudySync - Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>StudySync</h1>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="groups.html">Browse Groups</a></li>
          <li><a href="create-group.html">Create Group</a></li>
          <li><a href="calendar.html">Calendar</a></li>
          <li><a href="login.html">Login</a></li>
          <li><a href="register.html">Register</a></li>
          <li><a href="login.html">Logout</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <h2>My Dashboard</h2>

      <section id="my-groups">
        <h3>Groups I'm In</h3>
        <div id="dashboard-list">
          <p>(Loading joined groups...)</p>
        </div>
      </section>

      <section id="notifications">
        <h3>Notifications</h3>
        <p>(Any group invites or updates will appear here.)</p>
      </section>

      <section>
        <h3>Quick Actions</h3>
        <ul>
          <li><a href="groups.html">Browse Study Groups</a></li>
          <li><a href="create-group.html">Create a New Group</a></li>
        </ul>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 StudySync</p>
    </footer>

    <script src="auth.js"></script>
    <script src="dashboard.js"></script>
    <script>
function showPageNotification(message) {
  let notifyDiv = document.getElementById("page-notify");
  if (!notifyDiv) {
    notifyDiv = document.createElement("div");
    notifyDiv.id = "page-notify";
    notifyDiv.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      background: #dc3545;
      color: white;
      padding: 15px;
      border-radius: 5px;
      z-index: 9999;
      max-width: 300px;
    `;
    document.body.appendChild(notifyDiv);
  }
  
  notifyDiv.innerHTML = `${message} <button onclick="this.parentElement.remove()" style="float:right;background:none;border:none;color:white;">Ã—</button>`;
}

if (localStorage.getItem("currentUser")) {
  setInterval(() => {
    const reminders = JSON.parse(localStorage.getItem("meeting_reminders") || "[]");
    const now = new Date();
    
    reminders.forEach(reminder => {
      if (new Date(reminder.reminderTime) <= now && !reminder.sent) {
        showPageNotification(reminder.message);
        reminder.sent = true;
      }
    });
    
    localStorage.setItem("meeting_reminders", JSON.stringify(reminders));
  }, 10000);
}
</script>
  </body>
</html>
